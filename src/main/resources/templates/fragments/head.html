<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
  <head th:fragment="head(title, links)">
    <!-- Essential Meta Tags -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Title -->
    <title th:text="${title} ?: 'GastuApp - Gestión Inteligente de Finanzas'">
      GastuApp
    </title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="GastuApp: Gestiona tus ingresos y egresos de forma inteligente. Visualiza, controla y optimiza tus finanzas personales."
    />
    <meta
      name="keywords"
      content="gestión financiera, ingresos, egresos, presupuesto, finanzas personales, control gastos"
    />
    <meta name="author" content="GastuApp" />
    <meta name="robots" content="index, follow" />

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      integrity="sha384-4LISF5TTJX/fLmGSxO53rV4miRxdg84mZsxmO8Rx5jGtp/LbrixFETvWa5a6sESd"
      crossorigin="anonymous"
    />

    <!-- Prevent Sidebar FOUC -->
    <script>
      (function () {
        const isCollapsed = localStorage.getItem("sidebarCollapsed") === "true";
        if (isCollapsed) {
          document.documentElement.classList.add("sidebar-collapsed");
        }
      })();
    </script>

    <!-- Base Styles -->
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f8f9fa;
      }

      main {
        padding-top: 60px;
      }

      /* Prevent transitions on load */
      .preload * {
        transition: none !important;
      }
    </style>

    <!-- Page specific links -->
    <th:block th:replace="${links} ?: ~{}" />
  </head>

  <body class="preload">
    <!-- Scripts Fragment -->
    <div th:fragment="scripts">
      <!-- Bootstrap Bundle with Popper -->
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"
      ></script>

      <!-- Sidebar toggle script -->
      <script th:src="@{/js/common/sidebar.js}"></script>

      <!-- Navbar notifications script -->
      <script th:src="@{/js/common/navbar.js}"></script>

      <!-- Remove preload class -->
      <script>
        window.addEventListener("load", function () {
          document.body.classList.remove("preload");
        });
      </script>
    </div>
  </body>
</html>
